{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"w-50 mx-auto pt-5\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"exampleFormControlInput1\",\n  class: \"form-label mx-1\"\n}, [/*#__PURE__*/_createElementVNode(\"strong\", null, \"Image\")], -1 /* HOISTED */);\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"btn btn-primary\"\n}, \"Submit!\", -1 /* HOISTED */);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"form\", {\n    onSubmit: _cache[1] || (_cache[1] = _withModifiers($event => $options.submitBlog(), [\"prevent\"]))\n  }, [_createCommentVNode(\" Title and other fields \"), _createCommentVNode(\" Add a new input field for image upload \"), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", null, [_hoisted_2, _createElementVNode(\"input\", {\n    type: \"file\",\n    class: \"form-control\",\n    id: \"\",\n    onChange: _cache[0] || (_cache[0] = (...args) => $options.handleImageUpload && $options.handleImageUpload(...args))\n  }, null, 32 /* NEED_HYDRATION */)])]), _createCommentVNode(\" Submit button \"), _hoisted_3], 32 /* NEED_HYDRATION */);\n}","map":{"version":3,"names":["class","_createElementVNode","for","type","_createElementBlock","onSubmit","_cache","_withModifiers","$event","$options","submitBlog","_createCommentVNode","_hoisted_1","_hoisted_2","id","onChange","args","handleImageUpload","_hoisted_3"],"sources":["/home/toree/Desktop/vue-drf-blog-dj/frontend/src/views/NewBlog.vue"],"sourcesContent":["<template>\n  <form v-on:submit.prevent=\"submitBlog()\">\n    <!-- Title and other fields -->\n\n    <!-- Add a new input field for image upload -->\n    <div class=\"w-50 mx-auto pt-5\">\n      <div>\n        <label for=\"exampleFormControlInput1\" class=\"form-label mx-1\"><strong>Image</strong></label>\n        <input type=\"file\" class=\"form-control\" id=\"\" v-on:change=\"handleImageUpload\">\n      </div>\n    </div>\n\n    <!-- Submit button -->\n    <button type=\"submit\" class=\"btn btn-primary\">Submit!</button>\n  </form>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      blog: {\n        title: '',\n        content: '',\n        slug: '',\n        short_description: '',\n        image: null, // Add image field to the blog object\n      },\n    }   \n  },\n\n  methods: {\n    async submitBlog() {\n      const token = localStorage.getItem('token');\n      const formData = new FormData(); // Create a FormData object\n\n      // Append all form data, including the image, to the FormData object\n      formData.append('title', this.blog.title);\n      formData.append('content', this.blog.content);\n      formData.append('slug', this.blog.slug);\n      formData.append('short_description', this.blog.short_description);\n      formData.append('image', this.blog.image);\n\n      await axios\n        .post('blogs/addblog/', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data', // Set the content type to multipart/form-data\n            Authorization: `Token ${token}`,\n          },\n        })\n        .then(response => {\n          this.blog.title = '';\n          this.blog.content = '';\n          this.blog.slug = '';\n          this.blog.short_description = '';\n          this.blog.image = null; // Reset the image field\n          alert('Blog was added');\n        })\n        .catch(error => {\n          console.log(error);\n        });\n    },\n\n    handleImageUpload(event) {\n      const file = event.target.files[0];\n      this.blog.image = file;\n    },\n  },\n}\n</script>"],"mappings":";;EAKSA,KAAK,EAAC;AAAmB;gCAE1BC,mBAAA,CAA4F;EAArFC,GAAG,EAAC,0BAA0B;EAACF,KAAK,EAAC;iBAAkBC,mBAAA,CAAsB,gBAAd,OAAK,E;gCAM/EA,mBAAA,CAA8D;EAAtDE,IAAI,EAAC,QAAQ;EAACH,KAAK,EAAC;GAAkB,SAAO;;uBAZvDI,mBAAA,CAaO;IAbIC,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,CAAAC,MAAA,IAAUC,QAAA,CAAAC,UAAU;MACnCC,mBAAA,4BAA+B,EAE/BA,mBAAA,4CAA+C,EAC/CV,mBAAA,CAKM,OALNW,UAKM,GAJJX,mBAAA,CAGM,cAFJY,UAA4F,EAC5FZ,mBAAA,CAA8E;IAAvEE,IAAI,EAAC,MAAM;IAACH,KAAK,EAAC,cAAc;IAACc,EAAE,EAAC,EAAE;IAAMC,QAAM,EAAAT,MAAA,QAAAA,MAAA,UAAAU,IAAA,KAAEP,QAAA,CAAAQ,iBAAA,IAAAR,QAAA,CAAAQ,iBAAA,IAAAD,IAAA,CAAiB;yCAIhFL,mBAAA,mBAAsB,EACtBO,UAA8D,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}