{"ast":null,"code":"import axios from 'axios';\nimport Footer from '../components/Footer.vue';\nexport default {\n  data() {\n    return {\n      blog: {\n        title: '',\n        content: '',\n        slug: '',\n        short_description: '',\n        image: null\n      }\n    };\n  },\n  components: {\n    Footer\n  },\n  methods: {\n    async submitBlog() {\n      const token = localStorage.getItem('token');\n      const formData = new FormData();\n      formData.append('title', this.blog.title);\n      formData.append('content', this.blog.content);\n      formData.append('slug', this.blog.slug);\n      formData.append('shor_descrtiption', this.blog.short_description);\n      formData.append('image', this.blog.image);\n      try {\n        const response = await axios.post('blogs/addblog/', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n            Authorization: `Token ${token}`\n          }\n        });\n        this.blog.title = '';\n        this.blog.content = '';\n        this.blog.slug = '';\n        this.blog.short_description = '';\n        this.blog.image = null;\n        alert('Blog was added');\n      } catch (error) {\n        console.log(error);\n      }\n\n      // await axios\n      //     .post('blogs/addblog/', this.blog, {\n      //       headers:{\n      //         Authorization: `Token ${token}`\n      //       }\n      //     })\n      //     .then(response => {\n      //       this.blog.title=''\n      //       this.blog.name=''\n      //       this.blog.content=''\n      //       this.blog.slug = ''\n      //       this.blog.short_description = ''\n      //       this.blog.image = null\n      //       alert('Blog was added')\n      //     })\n      //     .catch(error => {\n      //       console.log(error)\n      //     })\n    },\n    handleImageUpload(event) {\n      const file = event.target.files[0];\n      this.blog.image = file;\n    }\n  }\n};","map":{"version":3,"names":["axios","Footer","data","blog","title","content","slug","short_description","image","components","methods","submitBlog","token","localStorage","getItem","formData","FormData","append","response","post","headers","Authorization","alert","error","console","log","handleImageUpload","event","file","target","files"],"sources":["/home/toree/Desktop/vue-drf-blog-dj/frontend/src/views/NewBlog.vue"],"sourcesContent":["<template>\n  <div class=\"mb-5 vw-100\">\n    <form v-on:submit.prevent=\"submitBlog()\" class=\"vh-100\">\n      <div class=\"w-50 mx-auto pt-2\">\n        <div >\n        <label for=\"exampleFormControlInput1\" class=\"form-label mx-1\"><strong>Title</strong></label>\n        <input type=\"text\" class=\"form-control\" id=\"\" placeholder=\"NewBlog\" v-model=\"blog.title\">\n      </div>\n      </div>\n      <div class=\"w-50 mx-auto pt-2\">\n        <div>\n        <label for=\"exampleFormControlInput1\" class=\"form-label  mx-1\"><strong>Slug</strong></label>\n        <input type=\"text\" class=\"form-control\" id=\"\" placeholder=\"Slug\" v-model=\"blog.slug\">\n      </div>\n      </div>\n      <div class=\"w-50 mx-auto pt-2\">\n        <div class=\"mb-3\">\n        <label for=\"exampleFormControlInput1\" class=\"form-label mt-3 mx-1\"><strong>Short Description</strong></label>\n        <input type=\"text\" class=\"form-control\" id=\"\" placeholder=\"Short Description\" v-model=\"blog.short_description\">\n      </div>\n      <div class=\"w-50 mb-5 pt-2\">\n        <div>\n          <label for=\"exampleFormControlInput1\" class=\"form-label mx-1 w-100%\"><strong>Image</strong></label>\n          <input type=\"file\" class=\"form-control\" id=\"\" v-on:change=\"handleImageUpload\">\n        </div>   \n      </div>\n        <div class=\"mb-2\">\n          <label for=\"exampleFormControlTextarea1\" class=\"form-label mt-3 mx-1\"><strong>Content!</strong></label>\n          <textarea class=\"form-control\" id=\"exampleFormControlTextarea1\" placeholder=\"Content\" rows=\"10\" v-model=\"blog.content\"></textarea>\n        </div>\n\n       \n        <button type=\"submit\" class=\"btn btn-primary\">Submit!</button>\n     </div>\n    </form>\n  </div>\n  \n  <!-- <Footer /> -->\n</template>\n\n<script>\nimport axios from 'axios';\nimport Footer from '../components/Footer.vue'\n\nexport default {\n  data(){\n    return{\n      blog: {\n        title: '',\n        content: '',\n        slug:'',\n        short_description:'',\n        image: null,\n    },\n    }   \n  },\n  components: {\n    Footer\n  },\n\n\n  methods:{\n      async submitBlog(){\n        const token = localStorage.getItem('token')\n        const formData = new FormData();\n\n        formData.append('title', this.blog.title);\n        formData.append('content', this.blog.content);\n        formData.append('slug', this.blog.slug);\n        formData.append('shor_descrtiption', this.blog.short_description);\n        formData.append('image', this.blog.image);\n\n        try{\n          const response = await axios.post('blogs/addblog/', formData, {\n            headers: {\n              'Content-Type': 'multipart/form-data',\n              Authorization: `Token ${token}`,\n            },\n          });\n\n          this.blog.title = '';\n          this.blog.content = '';\n          this.blog.slug = '';\n          this.blog.short_description='';\n          this.blog.image = null;\n\n          alert('Blog was added');\n\n        } catch (error){\n          console.log(error);\n        }\n\n\n        // await axios\n        //     .post('blogs/addblog/', this.blog, {\n        //       headers:{\n        //         Authorization: `Token ${token}`\n        //       }\n        //     })\n        //     .then(response => {\n        //       this.blog.title=''\n        //       this.blog.name=''\n        //       this.blog.content=''\n        //       this.blog.slug = ''\n        //       this.blog.short_description = ''\n        //       this.blog.image = null\n        //       alert('Blog was added')\n        //     })\n        //     .catch(error => {\n        //       console.log(error)\n        //     })\n      },\n      handleImageUpload(event) {\n        const file = event.target.files[0]\n        this.blog.image=file\n      }\n      \n    }\n}\n</script>\n\n<!-- title = models.CharField(max_length=120)\nslug = models.SlugField(null=True)\nshort_description = models.TextField(blank=True, null = True)\ncreated_at = models.DateField(auto_now_add = True, null = True)\nupdated_at = models.DateField(auto_now= True)\ncontent = models.TextField()\ncreated_by = models.ForeignKey(User, on_delete= models.CASCADE, null = True) -->"],"mappings":"AAyCA,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,MAAK,MAAO,0BAAyB;AAE5C,eAAe;EACbC,IAAIA,CAAA,EAAE;IACJ,OAAM;MACJC,IAAI,EAAE;QACJC,KAAK,EAAE,EAAE;QACTC,OAAO,EAAE,EAAE;QACXC,IAAI,EAAC,EAAE;QACPC,iBAAiB,EAAC,EAAE;QACpBC,KAAK,EAAE;MACX;IACA;EACF,CAAC;EACDC,UAAU,EAAE;IACVR;EACF,CAAC;EAGDS,OAAO,EAAC;IACJ,MAAMC,UAAUA,CAAA,EAAE;MAChB,MAAMC,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,OAAO;MAC1C,MAAMC,QAAO,GAAI,IAAIC,QAAQ,CAAC,CAAC;MAE/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAE,IAAI,CAACd,IAAI,CAACC,KAAK,CAAC;MACzCW,QAAQ,CAACE,MAAM,CAAC,SAAS,EAAE,IAAI,CAACd,IAAI,CAACE,OAAO,CAAC;MAC7CU,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE,IAAI,CAACd,IAAI,CAACG,IAAI,CAAC;MACvCS,QAAQ,CAACE,MAAM,CAAC,mBAAmB,EAAE,IAAI,CAACd,IAAI,CAACI,iBAAiB,CAAC;MACjEQ,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAE,IAAI,CAACd,IAAI,CAACK,KAAK,CAAC;MAEzC,IAAG;QACD,MAAMU,QAAO,GAAI,MAAMlB,KAAK,CAACmB,IAAI,CAAC,gBAAgB,EAAEJ,QAAQ,EAAE;UAC5DK,OAAO,EAAE;YACP,cAAc,EAAE,qBAAqB;YACrCC,aAAa,EAAG,SAAQT,KAAM;UAChC;QACF,CAAC,CAAC;QAEF,IAAI,CAACT,IAAI,CAACC,KAAI,GAAI,EAAE;QACpB,IAAI,CAACD,IAAI,CAACE,OAAM,GAAI,EAAE;QACtB,IAAI,CAACF,IAAI,CAACG,IAAG,GAAI,EAAE;QACnB,IAAI,CAACH,IAAI,CAACI,iBAAiB,GAAC,EAAE;QAC9B,IAAI,CAACJ,IAAI,CAACK,KAAI,GAAI,IAAI;QAEtBc,KAAK,CAAC,gBAAgB,CAAC;MAEzB,EAAE,OAAOC,KAAK,EAAC;QACbC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACpB;;MAGA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACF,CAAC;IACDG,iBAAiBA,CAACC,KAAK,EAAE;MACvB,MAAMC,IAAG,GAAID,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC;MACjC,IAAI,CAAC3B,IAAI,CAACK,KAAK,GAACoB,IAAG;IACrB;EAEF;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}